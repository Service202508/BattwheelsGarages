<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="4" skipped="8" tests="20" time="3.087" timestamp="2026-02-19T17:07:38.824178+00:00" hostname="agent-env-f3f71ec6-f4cf-48e3-972d-2975d6a1578f"><testcase classname="backend.tests.test_ticket_estimate_integration.TestTicketEstimateEnsure" name="test_ensure_estimate_creates_new" time="0.582" /><testcase classname="backend.tests.test_ticket_estimate_integration.TestTicketEstimateEnsure" name="test_ensure_estimate_idempotent" time="0.133" /><testcase classname="backend.tests.test_ticket_estimate_integration.TestTicketEstimateEnsure" name="test_ensure_estimate_for_nonexistent_ticket" time="0.062" /><testcase classname="backend.tests.test_ticket_estimate_integration.TestGetTicketEstimate" name="test_get_estimate_by_ticket" time="0.133" /><testcase classname="backend.tests.test_ticket_estimate_integration.TestGetTicketEstimate" name="test_get_estimate_by_id" time="0.141" /><testcase classname="backend.tests.test_ticket_estimate_integration.TestGetTicketEstimate" name="test_get_nonexistent_estimate" time="0.057" /><testcase classname="backend.tests.test_ticket_estimate_integration.TestLineItemCRUD" name="test_add_part_line_item" time="0.212"><failure message="AssertionError: Expected 200, got 423: {&quot;detail&quot;:{&quot;message&quot;:&quot;Estimate is locked: TEST_Locked for conversion to invoice&quot;,&quot;locked_at&quot;:&quot;2026-02-19T17:07:33.310516+00:00&quot;,&quot;locked_by&quot;:&quot;Admin User&quot;}}&#10;assert 423 == 200&#10; +  where 423 = &lt;Response [423]&gt;.status_code">backend/tests/test_ticket_estimate_integration.py:211: in test_add_part_line_item
    assert response.status_code == 200, f"Expected 200, got {response.status_code}: {response.text}"
E   AssertionError: Expected 200, got 423: {"detail":{"message":"Estimate is locked: TEST_Locked for conversion to invoice","locked_at":"2026-02-19T17:07:33.310516+00:00","locked_by":"Admin User"}}
E   assert 423 == 200
E    +  where 423 = &lt;Response [423]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestLineItemCRUD" name="test_add_labour_line_item" time="0.185"><failure message="AssertionError: Expected 200, got 423: {&quot;detail&quot;:{&quot;message&quot;:&quot;Estimate is locked: TEST_Locked for conversion to invoice&quot;,&quot;locked_at&quot;:&quot;2026-02-19T17:07:33.310516+00:00&quot;,&quot;locked_by&quot;:&quot;Admin User&quot;}}&#10;assert 423 == 200&#10; +  where 423 = &lt;Response [423]&gt;.status_code">backend/tests/test_ticket_estimate_integration.py:253: in test_add_labour_line_item
    assert response.status_code == 200, f"Expected 200, got {response.status_code}: {response.text}"
E   AssertionError: Expected 200, got 423: {"detail":{"message":"Estimate is locked: TEST_Locked for conversion to invoice","locked_at":"2026-02-19T17:07:33.310516+00:00","locked_by":"Admin User"}}
E   assert 423 == 200
E    +  where 423 = &lt;Response [423]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestLineItemCRUD" name="test_add_fee_line_item" time="0.198"><failure message="AssertionError: Expected 200, got 423: {&quot;detail&quot;:{&quot;message&quot;:&quot;Estimate is locked: TEST_Locked for conversion to invoice&quot;,&quot;locked_at&quot;:&quot;2026-02-19T17:07:33.310516+00:00&quot;,&quot;locked_by&quot;:&quot;Admin User&quot;}}&#10;assert 423 == 200&#10; +  where 423 = &lt;Response [423]&gt;.status_code">backend/tests/test_ticket_estimate_integration.py:282: in test_add_fee_line_item
    assert response.status_code == 200, f"Expected 200, got {response.status_code}: {response.text}"
E   AssertionError: Expected 200, got 423: {"detail":{"message":"Estimate is locked: TEST_Locked for conversion to invoice","locked_at":"2026-02-19T17:07:33.310516+00:00","locked_by":"Admin User"}}
E   assert 423 == 200
E    +  where 423 = &lt;Response [423]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestLineItemCRUD" name="test_update_line_item" time="0.209"><skipped type="pytest.skip" message="Could not add item to update">/app/backend/tests/test_ticket_estimate_integration.py:306: Could not add item to update</skipped></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestLineItemCRUD" name="test_delete_line_item" time="0.186"><skipped type="pytest.skip" message="Could not add item to delete">/app/backend/tests/test_ticket_estimate_integration.py:360: Could not add item to delete</skipped></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestConcurrencyControl" name="test_version_mismatch_returns_409" time="0.127"><failure message="AssertionError: Expected 409 for version mismatch, got 423: {&quot;detail&quot;:{&quot;message&quot;:&quot;Estimate is locked: TEST_Locked for conversion to invoice&quot;,&quot;locked_at&quot;:&quot;2026-02-19T17:07:33.310516+00:00&quot;,&quot;locked_by&quot;:&quot;Admin User&quot;}}&#10;assert 423 == 409&#10; +  where 423 = &lt;Response [423]&gt;.status_code">backend/tests/test_ticket_estimate_integration.py:417: in test_version_mismatch_returns_409
    assert response.status_code == 409, f"Expected 409 for version mismatch, got {response.status_code}: {response.text}"
E   AssertionError: Expected 409 for version mismatch, got 423: {"detail":{"message":"Estimate is locked: TEST_Locked for conversion to invoice","locked_at":"2026-02-19T17:07:33.310516+00:00","locked_by":"Admin User"}}
E   assert 423 == 409
E    +  where 423 = &lt;Response [423]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestConcurrencyControl" name="test_update_with_wrong_version" time="0.196"><skipped type="pytest.skip" message="Could not add test item">/app/backend/tests/test_ticket_estimate_integration.py:445: Could not add test item</skipped></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestEstimateLocking" name="test_lock_estimate_as_admin" time="0.074"><skipped type="pytest.skip" message="Test estimate is already locked, cannot test locking flow">/app/backend/tests/test_ticket_estimate_integration.py:487: Test estimate is already locked, cannot test locking flow</skipped></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestEstimateLocking" name="test_modify_locked_estimate_returns_423" time="0.068"><skipped type="pytest.skip" message="Test estimate is already locked, cannot test locking flow">/app/backend/tests/test_ticket_estimate_integration.py:517: Test estimate is already locked, cannot test locking flow</skipped></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestEstimateStatusOperations" name="test_send_estimate" time="0.076"><skipped type="pytest.skip" message="Cannot send locked estimate">/app/backend/tests/test_ticket_estimate_integration.py:577: Cannot send locked estimate</skipped></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestEstimateStatusOperations" name="test_approve_estimate" time="0.066"><skipped type="pytest.skip" message="Cannot approve locked estimate">/app/backend/tests/test_ticket_estimate_integration.py:598: Cannot approve locked estimate</skipped></testcase><testcase classname="backend.tests.test_ticket_estimate_integration.TestListTicketEstimates" name="test_list_estimates" time="0.064" /><testcase classname="backend.tests.test_ticket_estimate_integration.TestListTicketEstimates" name="test_list_estimates_with_status_filter" time="0.067" /><testcase classname="backend.tests.test_ticket_estimate_integration.TestTotalsCalculation" name="test_totals_update_on_add" time="0.126"><skipped type="pytest.skip" message="Cannot test on locked estimate">/app/backend/tests/test_ticket_estimate_integration.py:680: Cannot test on locked estimate</skipped></testcase></testsuite></testsuites>