<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="26" skipped="0" tests="41" time="5.853" timestamp="2026-02-24T12:10:28.216457+00:00" hostname="agent-env-bccb8b21-7f1e-4de3-b03b-379e503276b7"><testcase classname="backend.tests.test_17flow_audit.TestFlow01Registration" name="test_register_page_accessible" time="0.275" /><testcase classname="backend.tests.test_17flow_audit.TestFlow01Registration" name="test_signup_creates_org" time="0.385"><failure message="AssertionError: No trial_ends_at in org&#10;assert 'trial_ends_at' in {'name': 'Audit Workshop Final', 'organization_id': 'org_545d5b59ccf8', 'plan_expires_at': '2026-03-10T12:10:28.705392+00:00', 'plan_type': 'free_trial', ...}">backend/tests/test_17flow_audit.py:105: in test_signup_creates_org
    assert "trial_ends_at" in org, "No trial_ends_at in org"
E   AssertionError: No trial_ends_at in org
E   assert 'trial_ends_at' in {'name': 'Audit Workshop Final', 'organization_id': 'org_545d5b59ccf8', 'plan_expires_at': '2026-03-10T12:10:28.705392+00:00', 'plan_type': 'free_trial', ...}</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow01Registration" name="test_user_has_owner_role" time="0.112"><failure message="AssertionError: Members API failed: {&quot;detail&quot;:&quot;Not Found&quot;}&#10;assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_17flow_audit.py:116: in test_user_has_owner_role
    assert res.status_code == 200, f"Members API failed: {res.text}"
E   AssertionError: Members API failed: {"detail":"Not Found"}
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow01Registration" name="test_onboarding_checklist_visible" time="0.150"><failure message="AssertionError: Onboarding status failed: {&quot;detail&quot;:&quot;Not Found&quot;}&#10;assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_17flow_audit.py:131: in test_onboarding_checklist_visible
    assert res.status_code == 200, f"Onboarding status failed: {res.text}"
E   AssertionError: Onboarding status failed: {"detail":"Not Found"}
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow02WorkshopProfile" name="test_update_org_profile" time="0.118"><failure message="AssertionError: Profile update failed: {&quot;detail&quot;:&quot;Not Found&quot;}&#10;assert 404 in [200, 204]&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_17flow_audit.py:157: in test_update_org_profile
    assert res.status_code in [200, 204], f"Profile update failed: {res.text}"
E   AssertionError: Profile update failed: {"detail":"Not Found"}
E   assert 404 in [200, 204]
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow02WorkshopProfile" name="test_profile_persists" time="0.106"><failure message="AssertionError: Profile GET failed: {&quot;detail&quot;:&quot;Not Found&quot;}&#10;assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_17flow_audit.py:168: in test_profile_persists
    assert res.status_code == 200, f"Profile GET failed: {res.text}"
E   AssertionError: Profile GET failed: {"detail":"Not Found"}
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow03InviteTeam" name="test_invite_technician" time="0.137"><failure message="AssertionError: Invite failed: {'detail': 'Not Found'}&#10;assert 404 in [200, 201, 400]&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_17flow_audit.py:198: in test_invite_technician
    assert res.status_code in [200, 201, 400], f"Invite failed: {data}"
E   AssertionError: Invite failed: {'detail': 'Not Found'}
E   assert 404 in [200, 201, 400]
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow03InviteTeam" name="test_tech_user_no_finance_access" time="0.515" /><testcase classname="backend.tests.test_17flow_audit.TestFlow04Inventory" name="test_add_bms_module" time="0.155"><failure message="AssertionError: BMS add failed: {'detail': [{'type': 'missing', 'loc': ['body', 'unit_price'], 'msg': 'Field required', 'input': {'name': 'BMS Module', 'sku': 'BMS-001', 'purchase_price': 2500, 'selling_price': 3200, 'quantity': 10, 'reorder_level': 2, 'unit': 'pcs', 'category': 'parts'}}, {'type': 'missing', 'loc': ['body', 'min_stock_level'], 'msg': 'Field required', 'input': {'name': 'BMS Module', 'sku': 'BMS-001', 'purchase_price': 2500, 'selling_price': 3200, 'quantity': 10, 'reorder_level': 2, 'unit': 'pcs', 'category': 'parts'}}]}&#10;assert 422 in [200, 201]&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_17flow_audit.py:254: in test_add_bms_module
    assert res.status_code in [200, 201], f"BMS add failed: {data}"
E   AssertionError: BMS add failed: {'detail': [{'type': 'missing', 'loc': ['body', 'unit_price'], 'msg': 'Field required', 'input': {'name': 'BMS Module', 'sku': 'BMS-001', 'purchase_price': 2500, 'selling_price': 3200, 'quantity': 10, 'reorder_level': 2, 'unit': 'pcs', 'category': 'parts'}}, {'type': 'missing', 'loc': ['body', 'min_stock_level'], 'msg': 'Field required', 'input': {'name': 'BMS Module', 'sku': 'BMS-001', 'purchase_price': 2500, 'selling_price': 3200, 'quantity': 10, 'reorder_level': 2, 'unit': 'pcs', 'category': 'parts'}}]}
E   assert 422 in [200, 201]
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow04Inventory" name="test_add_brake_pad" time="0.123"><failure message="AssertionError: Brake Pad add failed: {'detail': [{'type': 'missing', 'loc': ['body', 'unit_price'], 'msg': 'Field required', 'input': {'name': 'Brake Pad Set', 'sku': 'BRK-002', 'purchase_price': 450, 'selling_price': 650, 'quantity': 25, 'reorder_level': 5, 'unit': 'set', 'category': 'parts'}}, {'type': 'missing', 'loc': ['body', 'min_stock_level'], 'msg': 'Field required', 'input': {'name': 'Brake Pad Set', 'sku': 'BRK-002', 'purchase_price': 450, 'selling_price': 650, 'quantity': 25, 'reorder_level': 5, 'unit': 'set', 'category': 'parts'}}]}&#10;assert 422 in [200, 201]&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_17flow_audit.py:282: in test_add_brake_pad
    assert res.status_code in [200, 201], f"Brake Pad add failed: {data}"
E   AssertionError: Brake Pad add failed: {'detail': [{'type': 'missing', 'loc': ['body', 'unit_price'], 'msg': 'Field required', 'input': {'name': 'Brake Pad Set', 'sku': 'BRK-002', 'purchase_price': 450, 'selling_price': 650, 'quantity': 25, 'reorder_level': 5, 'unit': 'set', 'category': 'parts'}}, {'type': 'missing', 'loc': ['body', 'min_stock_level'], 'msg': 'Field required', 'input': {'name': 'Brake Pad Set', 'sku': 'BRK-002', 'purchase_price': 450, 'selling_price': 650, 'quantity': 25, 'reorder_level': 5, 'unit': 'set', 'category': 'parts'}}]}
E   assert 422 in [200, 201]
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow04Inventory" name="test_items_appear_in_list" time="0.123"><failure message="AssertionError: BMS not in list: []&#10;assert False&#10; +  where False = any(&lt;generator object TestFlow04Inventory.test_items_appear_in_list.&lt;locals&gt;.&lt;genexpr&gt; at 0xfe0d6058b850&gt;)">backend/tests/test_17flow_audit.py:300: in test_items_appear_in_list
    assert any("BMS" in n for n in names), f"BMS not in list: {names[:5]}"
E   AssertionError: BMS not in list: []
E   assert False
E    +  where False = any(&lt;generator object TestFlow04Inventory.test_items_appear_in_list.&lt;locals&gt;.&lt;genexpr&gt; at 0xfe0d6058b850&gt;)</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow05CustomerVehicle" name="test_create_contact" time="0.259"><failure message="AssertionError: Contact create failed: {'detail': 'Authentication required', 'code': 'AUTH_REQUIRED'}&#10;assert 401 in [200, 201]&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_17flow_audit.py:328: in test_create_contact
    assert res.status_code in [200, 201], f"Contact create failed: {data}"
E   AssertionError: Contact create failed: {'detail': 'Authentication required', 'code': 'AUTH_REQUIRED'}
E   assert 401 in [200, 201]
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow05CustomerVehicle" name="test_add_vehicle_to_contact" time="0.000"><failure message="AssertionError: No contact from Flow 05&#10;assert None">backend/tests/test_17flow_audit.py:337: in test_add_vehicle_to_contact
    assert state["contact_id"], "No contact from Flow 05"
E   AssertionError: No contact from Flow 05
E   assert None</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow06CreateTicket" name="test_create_ticket" time="0.106"><failure message="AssertionError: Ticket create failed: {'detail': [{'type': 'missing', 'loc': ['body', 'title'], 'msg': 'Field required', 'input': {'customer_name': 'Rajesh Kumar', 'customer_phone': '9876543210', 'vehicle_registration': 'DL01AB1234', 'vehicle_make': 'Ola', 'vehicle_model': 'S1 Pro', 'complaint': 'Battery not charging, range reduced to 30km, BMS warning on display', 'priority': 'high', 'ticket_type': 'workshop_visit', 'status': 'open'}}]}&#10;assert 422 in [200, 201]&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_17flow_audit.py:395: in test_create_ticket
    assert res.status_code in [200, 201], f"Ticket create failed: {data}"
E   AssertionError: Ticket create failed: {'detail': [{'type': 'missing', 'loc': ['body', 'title'], 'msg': 'Field required', 'input': {'customer_name': 'Rajesh Kumar', 'customer_phone': '9876543210', 'vehicle_registration': 'DL01AB1234', 'vehicle_make': 'Ola', 'vehicle_model': 'S1 Pro', 'complaint': 'Battery not charging, range reduced to 30km, BMS warning on display', 'priority': 'high', 'ticket_type': 'workshop_visit', 'status': 'open'}}]}
E   assert 422 in [200, 201]
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow06CreateTicket" name="test_ticket_has_unique_id" time="0.000"><failure message="AssertionError: No ticket from Flow 06&#10;assert None">backend/tests/test_17flow_audit.py:407: in test_ticket_has_unique_id
    assert state["ticket_id"], "No ticket from Flow 06"
E   AssertionError: No ticket from Flow 06
E   assert None</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow06CreateTicket" name="test_dashboard_open_count" time="0.137"><failure message="AssertionError: Open count should be &gt;=1, got 0. Data: {'vehicles_in_workshop': 0, 'open_repair_orders': 0, 'avg_repair_time': 0.0, 'available_technicians': 6, 'vehicle_status_distribution': {'active': 1, 'in_workshop': 0, 'serviced': 0}, 'monthly_repair_trends': [{'month': 'Sep', 'avgTime': 8.5}, {'month': 'Oct', 'avgTime': 8.0}, {'month': 'Nov', 'avgTime': 7.5}, {'month': 'Dec', 'avgTime': 7.0}, {'month': 'Jan', 'avgTime': 6.5}, {'month': 'Feb', 'avgTime': 0.1}], 'total_revenue': 0.0, 'pending_invoices': 0.0, 'inventory_value': 540397.9099999999, 'pending_purchase_orders': 0, 'service_ticket_stats': {'total_open': 0, 'onsite_resolution': 0, 'workshop_visit': 0, 'pickup': 0, 'remote': 0, 'avg_resolution_time_hours': 0.0, 'onsite_resolution_percentage': 0.0, 'total_resolved_30d': 0, 'total_onsite_resolved_30d': 0}}&#10;assert 0 &gt;= 1">backend/tests/test_17flow_audit.py:426: in test_dashboard_open_count
    assert open_count &gt;= 1, f"Open count should be &gt;=1, got {open_count}. Data: {data}"
E   AssertionError: Open count should be &gt;=1, got 0. Data: {'vehicles_in_workshop': 0, 'open_repair_orders': 0, 'avg_repair_time': 0.0, 'available_technicians': 6, 'vehicle_status_distribution': {'active': 1, 'in_workshop': 0, 'serviced': 0}, 'monthly_repair_trends': [{'month': 'Sep', 'avgTime': 8.5}, {'month': 'Oct', 'avgTime': 8.0}, {'month': 'Nov', 'avgTime': 7.5}, {'month': 'Dec', 'avgTime': 7.0}, {'month': 'Jan', 'avgTime': 6.5}, {'month': 'Feb', 'avgTime': 0.1}], 'total_revenue': 0.0, 'pending_invoices': 0.0, 'inventory_value': 540397.9099999999, 'pending_purchase_orders': 0, 'service_ticket_stats': {'total_open': 0, 'onsite_resolution': 0, 'workshop_visit': 0, 'pickup': 0, 'remote': 0, 'avg_resolution_time_hours': 0.0, 'onsite_resolution_percentage': 0.0, 'total_resolved_30d': 0, 'total_onsite_resolved_30d': 0}}
E   assert 0 &gt;= 1</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow07EFIDiagnostics" name="test_efi_diagnose" time="0.114"><failure message="AssertionError: EFI diagnose failed: {'detail': [{'type': 'missing', 'loc': ['body', 'issue_description'], 'msg': 'Field required', 'input': {'symptoms': 'Battery not charging, reduced range 30km, BMS warning', 'vehicle_type': '2W_EV'}}]}&#10;assert 422 == 200&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_17flow_audit.py:453: in test_efi_diagnose
    assert res.status_code == 200, f"EFI diagnose failed: {data}"
E   AssertionError: EFI diagnose failed: {'detail': [{'type': 'missing', 'loc': ['body', 'issue_description'], 'msg': 'Field required', 'input': {'symptoms': 'Battery not charging, reduced range 30km, BMS warning', 'vehicle_type': '2W_EV'}}]}
E   assert 422 == 200
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow07EFIDiagnostics" name="test_efi_failure_cards" time="0.113" /><testcase classname="backend.tests.test_17flow_audit.TestFlow08CloseTicket" name="test_update_status_in_progress" time="0.000"><failure message="AssertionError: Missing token or ticket&#10;assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)">backend/tests/test_17flow_audit.py:487: in test_update_status_in_progress
    assert state["token"] and state["ticket_id"], "Missing token or ticket"
E   AssertionError: Missing token or ticket
E   assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow08CloseTicket" name="test_close_ticket_with_resolution" time="0.000"><failure message="AssertionError: Missing token or ticket&#10;assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)">backend/tests/test_17flow_audit.py:499: in test_close_ticket_with_resolution
    assert state["token"] and state["ticket_id"], "Missing token or ticket"
E   AssertionError: Missing token or ticket
E   assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow08CloseTicket" name="test_ticket_shows_resolved" time="0.000"><failure message="AssertionError: Missing token or ticket&#10;assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)">backend/tests/test_17flow_audit.py:515: in test_ticket_shows_resolved
    assert state["token"] and state["ticket_id"], "Missing token or ticket"
E   AssertionError: Missing token or ticket
E   assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow09CreateInvoice" name="test_create_invoice" time="0.236"><failure message="AssertionError: Invoice create failed: {'detail': 'Authentication required', 'code': 'AUTH_REQUIRED'}&#10;assert 401 in [200, 201]&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_17flow_audit.py:577: in test_create_invoice
    assert res.status_code in [200, 201], f"Invoice create failed: {data}"
E   AssertionError: Invoice create failed: {'detail': 'Authentication required', 'code': 'AUTH_REQUIRED'}
E   assert 401 in [200, 201]
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow09CreateInvoice" name="test_invoice_gst_calculated" time="0.000"><failure message="AssertionError: Missing token or invoice&#10;assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)">backend/tests/test_17flow_audit.py:585: in test_invoice_gst_calculated
    assert state["token"] and state["invoice_id"], "Missing token or invoice"
E   AssertionError: Missing token or invoice
E   assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow10RecordPayment" name="test_record_payment" time="0.000"><failure message="AssertionError: Missing token or invoice&#10;assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)">backend/tests/test_17flow_audit.py:613: in test_record_payment
    assert state["token"] and state["invoice_id"], "Missing token or invoice"
E   AssertionError: Missing token or invoice
E   assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow10RecordPayment" name="test_invoice_status_paid" time="0.000"><failure message="AssertionError: Missing token or invoice&#10;assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)">backend/tests/test_17flow_audit.py:633: in test_invoice_status_paid
    assert state["token"] and state["invoice_id"], "Missing token or invoice"
E   AssertionError: Missing token or invoice
E   assert ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXNlcl9lMjFhOWI2MjVkNWQiLCJlbWFpbCI6ImF1ZGl0ZmluYWxAYmF0dHdoZWVsc3Rlc3QuY29tIiwicm9sZSI6ImFkbWluIiwib3JnX2lkIjoib3JnXzU0NWQ1YjU5Y2NmOCIsImV4cCI6MTc3MjUzOTgyOH0.MaE-vccMi_IhKt4l4YsT2yaLIZVTpE51FzgMo546N4I' and None)</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow11FinancialReports" name="test_trial_balance_loads" time="0.167" /><testcase classname="backend.tests.test_17flow_audit.TestFlow11FinancialReports" name="test_profit_loss_loads" time="0.107" /><testcase classname="backend.tests.test_17flow_audit.TestFlow11FinancialReports" name="test_gst_summary_loads" time="0.234" /><testcase classname="backend.tests.test_17flow_audit.TestFlow12TallyExport" name="test_tally_export" time="0.218"><failure message="AssertionError: Tally export failed: 404 {&quot;detail&quot;:&quot;Not Found&quot;}&#10;assert 404 == 200&#10; +  where 404 = &lt;Response [404]&gt;.status_code">backend/tests/test_17flow_audit.py:724: in test_tally_export
    assert res.status_code == 200, f"Tally export failed: {res.status_code} {res.text[:200]}"
E   AssertionError: Tally export failed: 404 {"detail":"Not Found"}
E   assert 404 == 200
E    +  where 404 = &lt;Response [404]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow13Payroll" name="test_add_employee" time="0.115"><failure message="AssertionError: Employee create failed: {'detail': [{'type': 'missing', 'loc': ['body', 'first_name'], 'msg': 'Field required', 'input': {'name': 'Ravi Kumar', 'employee_code': 'EMP-AUDIT-001', 'role': 'Technician', 'department': 'Workshop', 'basic_salary': 18000, 'pf_applicable': True, 'esi_applicable': True, 'state': 'Delhi', 'pan_number': 'ABCDE1234F', 'joining_date': '2026-02-01', 'email': 'ravi.kumar.audit@battwheelstest.com', 'phone': '9000000099'}}, {'type': 'missing', 'loc': ['body', 'last_name'], 'msg': 'Field required', 'input': {'name': 'Ravi Kumar', 'employee_code': 'EMP-AUDIT-001', 'role': 'Technician', 'department': 'Workshop', 'basic_salary': 18000, 'pf_applicable': True, 'esi_applicable': True, 'state': 'Delhi', 'pan_number': 'ABCDE1234F', 'joining_date': '2026-02-01', 'email': 'ravi.kumar.audit@battwheelstest.com', 'phone': '9000000099'}}, {'type': 'missing', 'loc': ['body', 'designation'], 'msg': 'Field required', 'input': {'name': 'Ravi Kumar', 'employee_code': 'EMP-AUDIT-001', 'role': 'Technician', 'department': 'Workshop', 'basic_salary': 18000, 'pf_applicable': True, 'esi_applicable': True, 'state': 'Delhi', 'pan_number': 'ABCDE1234F', 'joining_date': '2026-02-01', 'email': 'ravi.kumar.audit@battwheelstest.com', 'phone': '9000000099'}}, {'type': 'missing', 'loc': ['body', 'date_of_joining'], 'msg': 'Field required', 'input': {'name': 'Ravi Kumar', 'employee_code': 'EMP-AUDIT-001', 'role': 'Technician', 'department': 'Workshop', 'basic_salary': 18000, 'pf_applicable': True, 'esi_applicable': True, 'state': 'Delhi', 'pan_number': 'ABCDE1234F', 'joining_date': '2026-02-01', 'email': 'ravi.kumar.audit@battwheelstest.com', 'phone': '9000000099'}}]}&#10;assert 422 in [200, 201]&#10; +  where 422 = &lt;Response [422]&gt;.status_code">backend/tests/test_17flow_audit.py:782: in test_add_employee
    assert res.status_code in [200, 201], f"Employee create failed: {data}"
E   AssertionError: Employee create failed: {'detail': [{'type': 'missing', 'loc': ['body', 'first_name'], 'msg': 'Field required', 'input': {'name': 'Ravi Kumar', 'employee_code': 'EMP-AUDIT-001', 'role': 'Technician', 'department': 'Workshop', 'basic_salary': 18000, 'pf_applicable': True, 'esi_applicable': True, 'state': 'Delhi', 'pan_number': 'ABCDE1234F', 'joining_date': '2026-02-01', 'email': 'ravi.kumar.audit@battwheelstest.com', 'phone': '9000000099'}}, {'type': 'missing', 'loc': ['body', 'last_name'], 'msg': 'Field required', 'input': {'name': 'Ravi Kumar', 'employee_code': 'EMP-AUDIT-001', 'role': 'Technician', 'department': 'Workshop', 'basic_salary': 18000, 'pf_applicable': True, 'esi_applicable': True, 'state': 'Delhi', 'pan_number': 'ABCDE1234F', 'joining_date': '2026-02-01', 'email': 'ravi.kumar.audit@battwheelstest.com', 'phone': '9000000099'}}, {'type': 'missing', 'loc': ['body', 'designation'], 'msg': 'Field required', 'input': {'name': 'Ravi Kumar', 'employee_code': 'EMP-AUDIT-001', 'role': 'Technician', 'department': 'Workshop', 'basic_salary': 18000, 'pf_applicable': True, 'esi_applicable': True, 'state': 'Delhi', 'pan_number': 'ABCDE1234F', 'joining_date': '2026-02-01', 'email': 'ravi.kumar.audit@battwheelstest.com', 'phone': '9000000099'}}, {'type': 'missing', 'loc': ['body', 'date_of_joining'], 'msg': 'Field required', 'input': {'name': 'Ravi Kumar', 'employee_code': 'EMP-AUDIT-001', 'role': 'Technician', 'department': 'Workshop', 'basic_salary': 18000, 'pf_applicable': True, 'esi_applicable': True, 'state': 'Delhi', 'pan_number': 'ABCDE1234F', 'joining_date': '2026-02-01', 'email': 'ravi.kumar.audit@battwheelstest.com', 'phone': '9000000099'}}]}
E   assert 422 in [200, 201]
E    +  where 422 = &lt;Response [422]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow13Payroll" name="test_run_payroll" time="0.000"><failure message="AssertionError: No employee from Flow 13&#10;assert None&#10; +  where None = &lt;built-in method get of dict object at 0xfe0d60390cc0&gt;('employee_id')&#10; +    where &lt;built-in method get of dict object at 0xfe0d60390cc0&gt; = {'bms_item_id': None, 'brake_item_id': None, 'contact_id': None, 'employee_id': None, ...}.get">backend/tests/test_17flow_audit.py:791: in test_run_payroll
    assert state.get("employee_id"), "No employee from Flow 13"
E   AssertionError: No employee from Flow 13
E   assert None
E    +  where None = &lt;built-in method get of dict object at 0xfe0d60390cc0&gt;('employee_id')
E    +    where &lt;built-in method get of dict object at 0xfe0d60390cc0&gt; = {'bms_item_id': None, 'brake_item_id': None, 'contact_id': None, 'employee_id': None, ...}.get</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow14PublicTicket" name="test_public_form_accessible" time="0.114" /><testcase classname="backend.tests.test_17flow_audit.TestFlow14PublicTicket" name="test_public_submit_without_slug_gives_friendly_error" time="0.113"><failure message="AttributeError: 'list' object has no attribute 'lower'">backend/tests/test_17flow_audit.py:859: in test_public_submit_without_slug_gives_friendly_error
    assert "workshop" in error_msg.lower() or "org" in error_msg.lower() or "slug" in error_msg.lower() \
                         ^^^^^^^^^^^^^^^
E   AttributeError: 'list' object has no attribute 'lower'</failure></testcase><testcase classname="backend.tests.test_17flow_audit.TestFlow14PublicTicket" name="test_public_vehicle_categories" time="0.117" /><testcase classname="backend.tests.test_17flow_audit.TestFlow15DataInsights" name="test_insights_revenue" time="0.119" /><testcase classname="backend.tests.test_17flow_audit.TestFlow15DataInsights" name="test_insights_operations" time="0.137" /><testcase classname="backend.tests.test_17flow_audit.TestFlow15DataInsights" name="test_insights_technician" time="0.122" /><testcase classname="backend.tests.test_17flow_audit.TestFlow15DataInsights" name="test_insights_inventory" time="0.157" /><testcase classname="backend.tests.test_17flow_audit.TestFlow16BookDemo" name="test_book_demo_endpoint" time="0.382" /><testcase classname="backend.tests.test_17flow_audit.TestFlow16BookDemo" name="test_book_demo_validation" time="0.167" /><testcase classname="backend.tests.test_17flow_audit.TestCleanup" name="test_report_audit_org" time="0.000" /></testsuite></testsuites>