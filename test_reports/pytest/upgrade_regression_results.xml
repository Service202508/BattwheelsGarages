<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="13" failures="4" skipped="0" tests="35" time="4.742" timestamp="2026-02-24T07:47:13.464792+00:00" hostname="agent-env-b4cdb0f1-98cb-4c62-be85-b5e153824bde"><testcase classname="tests.test_upgrade_regression.TestHealthSmoke" name="test_health_returns_200" time="1.119" /><testcase classname="tests.test_upgrade_regression.TestHealthSmoke" name="test_health_status_ok" time="0.114" /><testcase classname="tests.test_upgrade_regression.TestHealthSmoke" name="test_health_response_has_expected_fields" time="0.152" /><testcase classname="tests.test_upgrade_regression.TestAuthDBReads" name="test_login_returns_200" time="0.360" /><testcase classname="tests.test_upgrade_regression.TestAuthDBReads" name="test_login_returns_token" time="0.336" /><testcase classname="tests.test_upgrade_regression.TestAuthDBReads" name="test_login_returns_organizations_array" time="0.332" /><testcase classname="tests.test_upgrade_regression.TestAuthDBReads" name="test_login_invalid_credentials_rejected" time="0.106" /><testcase classname="tests.test_upgrade_regression.TestSecurityHeadersRegression" name="test_x_content_type_options_present" time="0.440" /><testcase classname="tests.test_upgrade_regression.TestSecurityHeadersRegression" name="test_x_frame_options_present" time="0.434" /><testcase classname="tests.test_upgrade_regression.TestSecurityHeadersRegression" name="test_strict_transport_security_present" time="0.205" /><testcase classname="tests.test_upgrade_regression.TestSecurityHeadersRegression" name="test_content_security_policy_present" time="0.263" /><testcase classname="tests.test_upgrade_regression.TestSecurityHeadersRegression" name="test_all_required_headers_present_on_health" time="0.108" /><testcase classname="tests.test_upgrade_regression.TestCORSRegression" name="test_cors_rejects_arbitrary_origin_at_app_level" time="0.002" /><testcase classname="tests.test_upgrade_regression.TestCORSRegression" name="test_cors_allows_configured_origin" time="0.002" /><testcase classname="tests.test_upgrade_regression.TestCORSRegression" name="test_cors_no_wildcard_in_cors_config" time="0.005" /><testcase classname="tests.test_upgrade_regression.TestTenantIsolation" name="test_get_tickets_with_admin_token_returns_200" time="0.102"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestTenantIsolation" name="test_get_tickets_returns_list" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestTenantIsolation" name="test_get_tickets_without_org_id_returns_400" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestTenantIsolation" name="test_get_tickets_without_auth_returns_401" time="0.107" /><testcase classname="tests.test_upgrade_regression.TestTrialBalanceRegression" name="test_trial_balance_returns_200" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestTrialBalanceRegression" name="test_trial_balance_has_is_balanced_field" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestTrialBalanceRegression" name="test_trial_balance_is_balanced_true" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestTrialBalanceRegression" name="test_trial_balance_has_summary" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestStartupIndexMigrationHook" name="test_index_migration_log_present_in_backend_err_log" time="0.005" /><testcase classname="tests.test_upgrade_regression.TestStartupIndexMigrationHook" name="test_index_migration_log_present_in_backend_out_log" time="0.001" /><testcase classname="tests.test_upgrade_regression.TestStartupIndexMigrationHook" name="test_migration_module_is_importable" time="0.000"><failure message="ModuleNotFoundError: No module named 'migrations'">tests/test_upgrade_regression.py:411: in test_migration_module_is_importable
    spec = importlib.util.find_spec("migrations.add_org_id_indexes")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
&lt;frozen importlib.util&gt;:95: in find_spec
    ???
E   ModuleNotFoundError: No module named 'migrations'</failure></testcase><testcase classname="tests.test_upgrade_regression.TestForm16HRMotorRegression" name="test_form16_json_returns_200" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestForm16HRMotorRegression" name="test_form16_response_structure" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestForm16HRMotorRegression" name="test_form16_employee_name_present" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestWebhookIdempotencyRegression" name="test_first_webhook_processed" time="0.111"><failure message="AssertionError: First webhook failed: 400 {&quot;detail&quot;:&quot;Invalid webhook signature&quot;}&#10;assert 400 == 200&#10; +  where 400 = &lt;Response [400]&gt;.status_code">tests/test_upgrade_regression.py:497: in test_first_webhook_processed
    assert resp.status_code == 200, f"First webhook failed: {resp.status_code} {resp.text}"
E   AssertionError: First webhook failed: 400 {"detail":"Invalid webhook signature"}
E   assert 400 == 200
E    +  where 400 = &lt;Response [400]&gt;.status_code</failure></testcase><testcase classname="tests.test_upgrade_regression.TestWebhookIdempotencyRegression" name="test_duplicate_webhook_returns_already_processed" time="0.100"><failure message="AssertionError: First call failed: 400 {&quot;detail&quot;:&quot;Invalid webhook signature&quot;}&#10;assert 400 == 200&#10; +  where 400 = &lt;Response [400]&gt;.status_code">tests/test_upgrade_regression.py:513: in test_duplicate_webhook_returns_already_processed
    assert resp1.status_code == 200, f"First call failed: {resp1.status_code} {resp1.text}"
E   AssertionError: First call failed: 400 {"detail":"Invalid webhook signature"}
E   assert 400 == 200
E    +  where 400 = &lt;Response [400]&gt;.status_code</failure></testcase><testcase classname="tests.test_upgrade_regression.TestWebhookIdempotencyRegression" name="test_different_event_same_payment_not_duplicate" time="0.102"><failure message="AssertionError: captured event failed: 400&#10;assert 400 == 200&#10; +  where 400 = &lt;Response [400]&gt;.status_code">tests/test_upgrade_regression.py:542: in test_different_event_same_payment_not_duplicate
    assert resp1.status_code == 200, f"captured event failed: {resp1.status_code}"
E   AssertionError: captured event failed: 400
E   assert 400 == 200
E    +  where 400 = &lt;Response [400]&gt;.status_code</failure></testcase><testcase classname="tests.test_upgrade_regression.TestXSSSanitizationRegression" name="test_xss_script_tag_stripped_from_title" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestXSSSanitizationRegression" name="test_xss_img_onerror_stripped_from_description" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase><testcase classname="tests.test_upgrade_regression.TestXSSSanitizationRegression" name="test_plain_text_preserved_after_sanitization" time="0.000"><error message="failed on setup with &quot;AssertionError: Admin login failed: 429 {&quot;error&quot;:&quot;rate_limit_exceeded&quot;,&quot;retry_after&quot;:58,&quot;message&quot;:&quot;Too many requests. Please wait before retrying.&quot;}&#10;assert 429 == 200&#10; +  where 429 = &lt;Response [429]&gt;.status_code&quot;">tests/test_upgrade_regression.py:52: in admin_token
    assert resp.status_code == 200, f"Admin login failed: {resp.status_code} {resp.text}"
E   AssertionError: Admin login failed: 429 {"error":"rate_limit_exceeded","retry_after":58,"message":"Too many requests. Please wait before retrying."}
E   assert 429 == 200
E    +  where 429 = &lt;Response [429]&gt;.status_code</error></testcase></testsuite></testsuites>